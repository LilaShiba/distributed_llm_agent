version: "3.8"

services:
  # ğŸ§­ Router service (central API)
  router:
    build: ./router
    image: rpi-llm-router:latest
    container_name: router
    ports:
      - "8000:8000"
    environment:
      # Comma-separated list of worker endpoints
      WORKER_URLS: "http://worker1:5000,http://worker2:5000"
    depends_on:
      - worker1
      - worker2

  # âš™ï¸ Worker 1
  worker1:
    build: ./worker
    image: rpi-llm-worker:latest
    container_name: worker1
    ports:
      - "5001:5000"

  # âš™ï¸ Worker 2
  worker2:
    build: ./worker
    image: rpi-llm-worker:latest
    container_name: worker2
    ports:
      - "5002:5000"
